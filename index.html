<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Monteiro Intech - OrÃ§amentos</title>

  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="assets/favicon-16x16.png" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />

<!-- jsPDF primeiro -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- (opcional) PapaParse se vocÃª usa import CSV -->
<script defer src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<!-- seu app por Ãºltimo -->
<script type="module" src="js/main.js"></script>
</head>

<body>
  <header class="topbar">
    <div class="brand">Monteiro Intech</div>
    <div style="display:flex; gap:10px;">
      <button type="button" id="cart-toggle" class="cart-btn">ğŸ›’ Carrinho</button>
      <button type="button" id="abrir-admin" class="admin-btn">âš™ï¸ Admin</button>
    </div>
  </header>

  <div id="loading" class="loading hidden">
    <div class="spinner"></div>
    <p>Carregando...</p>
  </div>

  <div id="container-admin-carrinho">
    <!----------------------- Admin (sidebar direita) --------------------------->
    <section id="painel-admin" class="painel-admin hidden">
      <div style="margin-top:18px; padding:14px; background:#fff; border:1px solid rgba(0,0,0,.08); border-radius:14px;">
  <h3 style="margin:0 0 10px; font-size:1rem;">ğŸ“¥ Importar CatÃ¡logo (CSV â†’ Firestore)</h3>

  <input id="csv-url" type="url" placeholder="Cole a URL direta do CSV (https://...)" style="width:100%; padding:12px; border-radius:12px; border:1px solid #e5e7eb; outline:none; margin-bottom:10px;" />

  <div style="display:flex; gap:10px; flex-wrap:wrap;">
    <button type="button" id="btn-importar-csv-url" class="btn-secondary-pdf" style="flex:1;">Importar da URL</button>

    <label class="btn-secondary-pdf" style="flex:1; cursor:pointer; text-align:center;" for="csv-file">
      Importar Arquivo
    </label>
    <input id="csv-file" type="file" accept=".csv,text/csv" hidden />
  </div>

  <div id="import-status" style="margin-top:10px; font-weight:700; opacity:.85;"></div>

  <p style="margin:10px 0 0; font-size:.85rem; opacity:.75; line-height:1.35;">
    ObservaÃ§Ã£o: URL precisa permitir CORS. Se der erro de CORS, use â€œImportar Arquivoâ€.
  </p>
</div>
      <div class="admin-header">
        <h2>Painel Administrativo</h2>
        <button type="button" id="btn-sair-admin">Sair</button>
      </div>

      <div id="dashboard-admin" class="dashboard">
  <div class="dash-card">
    <h3>ğŸ“„ OrÃ§amentos</h3>
    <span id="dash-qtd">0</span>
  </div>

  <div class="dash-card">
    <h3>ğŸ’° Total</h3>
    <span id="dash-total">R$ 0,00</span>
  </div>

  <div class="dash-card">
    <h3>ğŸŸ¢ PIX</h3>
    <span id="dash-pix">R$ 0,00</span>
  </div>

  <div class="dash-card">
    <h3>ğŸ”µ DÃ©bito</h3>
    <span id="dash-debito">R$ 0,00</span>
  </div>

  <div class="dash-card">
    <h3>ğŸŸ£ CrÃ©dito</h3>
    <span id="dash-credito">R$ 0,00</span>
  </div>

  <div class="dash-card">
    <h3>ğŸ“ˆ Ticket MÃ©dio</h3>
    <span id="dash-ticket">R$ 0,00</span>
  </div>
</div>

<div class="dash-card" style="text-align:left;">
  <h3>ğŸ§® Atualizar Tabela (colar lista + aplicar custos)</h3>

  <label style="display:block; font-weight:900; margin:10px 0 6px;">Cole aqui a lista:</label>
  <textarea id="tabela-raw" rows="10" style="width:100%; border:1px solid #e5e7eb; border-radius:12px; padding:12px; outline:none;"></textarea>

  <div style="display:grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap:10px; margin-top:10px;">
    <div>
      <label style="display:block; font-weight:900; margin-bottom:6px;">MÃ£o de obra (R$)</label>
      <input id="tabela-mao" type="number" step="0.01" value="0"
        style="width:100%; border:1px solid #e5e7eb; border-radius:12px; padding:10px 12px; outline:none;">
    </div>
    <div>
      <label style="display:block; font-weight:900; margin-bottom:6px;">Frete (R$)</label>
      <input id="tabela-frete" type="number" step="0.01" value="0"
        style="width:100%; border:1px solid #e5e7eb; border-radius:12px; padding:10px 12px; outline:none;">
    </div>
    <div>
      <label style="display:block; font-weight:900; margin-bottom:6px;">Porcentagem (%)</label>
      <input id="tabela-perc" type="number" step="0.01" value="0"
        style="width:100%; border:1px solid #e5e7eb; border-radius:12px; padding:10px 12px; outline:none;">
    </div>
  </div>

  <div style="margin-top:10px;">
  <label style="display:block; font-weight:900; margin-bottom:6px;">Marca</label>
  <select id="tabela-marca"
    style="width:100%; border:1px solid #e5e7eb; border-radius:12px; padding:10px 12px; outline:none;">
    <option value="Samsung" selected>Samsung</option>
    <option value="Motorola">Motorola</option>
    <option value="Xiaomi">Xiaomi</option>
    <option value="Apple">Apple (iPhone)</option>
    <option value="LG">LG</option>
    <option value="Infinix">Infinix</option>
    <option value="Outros">Outros</option>
  </select>
  </div>

  <div style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;">
    <button type="button" id="tabela-preview" class="btn-secondary-pdf">PrÃ©-visualizar</button>
    <button type="button" id="tabela-aplicar" class="btn-primary-wa">Aplicar no Firebase</button>
  </div>

  <div id="tabela-status" style="margin-top:10px; font-weight:800; opacity:.85;"></div>

  <div id="tabela-preview-box"
       style="margin-top:10px; overflow:auto; max-height:260px; border:1px solid rgba(0,0,0,.06); border-radius:12px; padding:10px; background:#fff;">
  </div>

  <p style="margin:10px 0 0; font-size:.85rem; opacity:.75;">
    FÃ³rmula: <b>(preÃ§o_base + mÃ£o_de_obra + frete) Ã— (1 + %/100)</b>
  </p>
</div>

      <h2>RelatÃ³rios de OrÃ§amentos</h2>
      <div id="relatorio-lista"></div>

      <button type="button" id="btn-exportar-relatorio" class="btn-secondary-pdf">
        ğŸ“Š Exportar RelatÃ³rio (Excel)
      </button>
    </section>

    <!-- Carrinho (sidebar direita) -->
    <div id="cart-sidebar" class="cart-sidebar hidden">
      <div class="cart-header">
        <h3>Seu OrÃ§amento</h3>
        <button type="button" id="cart-close" class="close-btn" aria-label="Fechar carrinho">âœ•</button>
      </div>

      <div id="cart-items" class="cart-items"></div>

      <div class="cart-footer">
        <div id="cart-total" class="cart-total">Total: R$ 0,00</div>
        <button type="button" id="btn-open-wa" class="btn-primary-wa">ğŸš€ Finalizar no WhatsApp</button>
        <button type="button" id="btn-gerar-pdf" class="btn-secondary-pdf">ğŸ“„ Gerar PDF</button>
        <button type="button" id="btn-clear-cart" class="btn-clear-link">Limpar Carrinho</button>
      </div>
    </div>

    <!-- ConteÃºdo principal -->
    <div id="main-content">
      <main class="container">
        <section id="lista-servicos">
          <div class="hero-home">
            <h1>Bem-vindo Ã  Monteiro Intech</h1>
            <p>Aqui a confianÃ§a que se instala com um clique.</p>
          </div>
          <!-- O main.js vai inserir aqui: busca, abas e grid de serviÃ§os -->
        </section>
      </main>
    </div>
  </div>

  <!-------------------------------- Modal OrÃ§amento --------------------------->
  <div
    id="modal-orcamento"
    class="modal hidden"
    role="dialog"
    aria-modal="true"
    aria-labelledby="titulo-modal-orcamento"
  >
    <div class="modal-content modal-central">
      <div class="modal-header">
        <h3 id="titulo-modal-orcamento">Confirmar OrÃ§amento</h3>
        <button type="button" id="modal-orcamento-fechar" class="close-btn" aria-label="Fechar modal">âœ•</button>
      </div>

      <div class="modal-body">
        <label for="cliente-nome">Nome do Cliente:</label>
        <input type="text" id="cliente-nome" placeholder="Digite o nome..." required />

        <label for="forma-pagamento">Forma de Pagamento:</label>
        <select id="forma-pagamento">
          <option value="">Selecione...</option>
          <option value="PIX">PIX</option>
          <option value="Debito">DÃ©bito</option>
          <option value="Credito">CrÃ©dito</option>
        </select>

        <select id="parcelas" class="hidden">
          <option value="1">1x (Com Juros)</option>
          <option value="2">2x (Com Juros)</option>
          <option value="3">3x (Com Juros)</option>
          <option value="4">4x (Com Juros)</option>
          <option value="5">5x (Com Juros)</option>
          <option value="6">6x (Com Juros)</option>
        </select>
      </div>

      <div class="modal-footer">
        <button type="button" id="btn-confirmar-orcamento" class="btn btn-primary-wa">Confirmar</button>
      </div>
    </div>
  </div>

  <!--------------------- Modal Login Admin ------------------ -->
  <div
    id="modal-admin-login"
    class="modal hidden"
    role="dialog"
    aria-modal="true"
    aria-labelledby="titulo-modal-admin"
  >
    <div class="modal-content modal-central">
      <div class="modal-header">
        <h3 id="titulo-modal-admin">Acesso Admin</h3>
        <button type="button" id="modal-admin-fechar" class="close-btn" aria-label="Fechar">âœ•</button>
      </div>

      <div class="modal-body">
        <label for="admin-pass">Senha:</label>
        <input
          type="password"
          id="admin-pass"
          placeholder="Digite a senha..."
          autocomplete="current-password"
        />
        <p id="admin-err" style="display:none; margin:8px 0 0; color:#dc2626; font-weight:800;">
          Senha invÃ¡lida.
        </p>
      </div>

      <div class="modal-footer">
        <button type="button" id="btn-admin-entrar" class="btn-secondary-pdf">Entrar</button>
      </div>
    </div>
  </div>

  <footer class="rodape-intech">
    <h3>Monteiro Intech</h3>
    <p>ConfianÃ§a que se instala com um clique.</p>

    <div class="social-links">
      <a href="https://wa.me/5555997005039" target="_blank" rel="noopener noreferrer">WhatsApp</a>
      <a href="https://www.instagram.com/intech.monteiro/" target="_blank" rel="noopener noreferrer">Instagram</a>
      <a href="https://www.facebook.com/intech.monteiro?locale=pt_BR" target="_blank" rel="noopener noreferrer">Facebook</a>
    </div>

    <p class="creditos">Â© 2025 Monteiro Intech â€” Todos os direitos reservados.</p>
  </footer>
</body>
</html>